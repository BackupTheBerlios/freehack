<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FreeHack: CAnimation1.cc</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Erzeugt von Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="../../index.html">Hauptseite</a> | <a class="qindex" href="../../hierarchy.html">Klassenhierarchie</a> | <a class="qindex" href="../../annotated.html">Auflistung&nbsp;der&nbsp;Klassen</a> | <a class="qindex" href="../../dirs.html">Verzeichnisse</a> | <a class="qindex" href="../../files.html">Auflistung&nbsp;der&nbsp;Dateien</a> | <a class="qindex" href="../../functions.html">Klassen-Elemente</a> | <a class="qindex" href="../../pages.html">Zusätzliche&nbsp;Informationen</a> | <a class="qindex" href="../../examples.html">Beispiele</a></div>
<h1>CAnimation1.cc</h1>Ein Beispiel für die Benutzung von <a class="el" href="../../da/d99/classCAnimation.html">CAnimation</a>.<p>
<div class="fragment"><pre class="fragment"><span class="comment">/* Beispiel zur Benutzung von CAnimation.</span>
<span class="comment"> *</span>
<span class="comment"> * Es werden 2 Bilder geladen und der Animation hinzugefügt, und die</span>
<span class="comment"> * Spielschleife wird gestartet.</span>
<span class="comment"> * jetzt kann durch drücken der Leertaste die Animation gestartet und gestoppt</span>
<span class="comment"> * werden. Beendet wird das Programm mit [ESC].</span>
<span class="comment"> * Es wird davon ausgegangen, dass der grundsätzliche Umgang mit SDL</span>
<span class="comment"> * bekonnt ist.</span>
<span class="comment"> */</span>

<span class="preprocessor">#include &lt;SDL/SDL.h&gt;</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="preprocessor">#include "../src/animation.h"</span>           <span class="comment">// für CAnimation</span>
<span class="preprocessor">#include "../src/image.h"</span>       <span class="comment">// für CAnimationImage</span>

<span class="keywordtype">int</span> main()
{
        SDL_Surface *screen;
        <span class="keywordtype">int</span> done=0;
        <a name="_a0"></a><a class="code" href="../../da/d99/classCAnimation.html">CAnimation</a> *animation;          <span class="comment">// Unsere Animation</span>
        <a name="_a1"></a><a class="code" href="../../d9/d8d/classCImage.html">CImage</a> *pic1, *pic2;    <span class="comment">// Die 2 Bilder für die Animation</span>
        
        <span class="comment">// SDL stuff</span>
        <span class="keywordflow">if</span> (SDL_Init(SDL_INIT_VIDEO|SDL_INIT_NOPARACHUTE) &lt; 0)
        {
                std::cout &lt;&lt; <span class="stringliteral">"Unable to init SDL: "</span> &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
                <span class="keywordflow">return</span> 1;
        }
        atexit(SDL_Quit);

        <span class="keywordflow">if</span> ((screen=SDL_SetVideoMode(200, 200, 32, SDL_HWSURFACE|SDL_DOUBLEBUF)) == NULL)
        {
                std::cout &lt;&lt; <span class="stringliteral">"Unable to set videomode: "</span> &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
                <span class="keywordflow">return</span> 1;
        }
        
        
        <span class="comment">// Bilder laden und DelayTime setzten</span>
        
        <span class="comment">/* Was hier als Ausgabe übergeben wird ist egal, da es sowiso von</span>
<span class="comment">         * CAnimation überschrieben wird, wenn man das Bild hinzufügt.</span>
<span class="comment">         * Man darf nur nicht  versuchen das Bild selbst zu zeichnen.</span>
<span class="comment">         */</span>
        pic1 = <span class="keyword">new</span> <a class="code" href="../../d9/d8d/classCImage.html">CImage</a>(NULL);  
        pic1-&gt;<a name="a2"></a><a class="code" href="../../d9/d8d/classCImage.html#a2">LoadFromFile</a>(<span class="stringliteral">"../images/examples/zahnrad1.bmp"</span>);

        pic2 = <span class="keyword">new</span> <a class="code" href="../../d9/d8d/classCImage.html">CImage</a>(NULL);
        pic2-&gt;<a class="code" href="../../d9/d8d/classCImage.html#a2">LoadFromFile</a>(<span class="stringliteral">"../images/examples/zahnrad2.bmp"</span>);

        
        <span class="comment">// Animation vorbereiten</span>
        animation = <span class="keyword">new</span> <a class="code" href="../../da/d99/classCAnimation.html">CAnimation</a>(screen);  <span class="comment">// initialisierung; Ausgabe soll auf screen stattfinden</span>
        animation-&gt;<a name="a3"></a><a class="code" href="../../da/d99/classCAnimation.html#o0">ImageList</a>.<a name="a4"></a><a class="code" href="../../da/d2a/classCList.html#a0">Add</a>(pic1);
        animation-&gt;<a class="code" href="../../da/d99/classCAnimation.html#o0">ImageList</a>.<a class="code" href="../../da/d2a/classCList.html#a0">Add</a>(pic2);
        animation-&gt;<a name="a5"></a><a class="code" href="../../da/d99/classCAnimation.html#a2">SetAnimationspeed</a>(0.8);
        animation-&gt;<a name="a6"></a><a class="code" href="../../d3/d44/classCSurfaceChild.html#a3">SetPosition</a>(0, 0);

        <span class="keywordflow">while</span> (done == 0)  <span class="comment">// Spielschleife</span>
        {
                SDL_Event event;
                <span class="comment">// Events abarbeiten</span>
                <span class="keywordflow">while</span> (SDL_PollEvent(&amp;event))
                {
                        <span class="keywordflow">if</span> (event.type == SDL_QUIT)
                                done = 1;
                        
                        <span class="keywordflow">if</span> (event.type == SDL_KEYDOWN)
                        {
                                <span class="keywordflow">if</span> (event.key.keysym.sym == SDLK_ESCAPE)
                                        done = 1;
                                <span class="keywordflow">if</span> (event.key.keysym.sym == SDLK_SPACE)
                                {
                                        <span class="keywordflow">if</span> (animation-&gt;<a name="a7"></a><a class="code" href="../../da/d99/classCAnimation.html#a6">IsRunning</a>())
                                                animation-&gt;<a name="a8"></a><a class="code" href="../../da/d99/classCAnimation.html#a8">Stop</a>();
                                        <span class="keywordflow">else</span>
                                                animation-&gt;<a name="a9"></a><a class="code" href="../../da/d99/classCAnimation.html#a7">Start</a>();
                                }
                        }
                }
        
                animation-&gt;<a name="a10"></a><a class="code" href="../../da/d99/classCAnimation.html#a11">Draw</a>();  <span class="comment">// aktuelles Bild der Animation zeichnen</span>
                
                SDL_Flip(screen);  <span class="comment">// Bild aktualisieren</span>
        }
}
</pre></div> <hr size="1"><address style="align: right;"><small>Erzeugt am Wed Apr 6 20:07:26 2005 für FreeHack von&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
