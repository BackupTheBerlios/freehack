<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FreeHack: src/animation.cc Quellcode</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Erzeugt von Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="../../index.html">Hauptseite</a> | <a class="qindex" href="../../hierarchy.html">Klassenhierarchie</a> | <a class="qindex" href="../../annotated.html">Auflistung&nbsp;der&nbsp;Klassen</a> | <a class="qindex" href="../../dirs.html">Verzeichnisse</a> | <a class="qindex" href="../../files.html">Auflistung&nbsp;der&nbsp;Dateien</a> | <a class="qindex" href="../../functions.html">Klassen-Elemente</a> | <a class="qindex" href="../../pages.html">Zusätzliche&nbsp;Informationen</a> | <a class="qindex" href="../../examples.html">Beispiele</a></div>
<div class="nav">
<a class="el" href="../../dir_000000.html">src</a></div>
<h1>animation.cc</h1><a href="../../db/de0/animation_8cc.html">gehe zur Dokumentation dieser Datei</a><div class="fragment"><pre class="fragment">00001 
00008 <span class="preprocessor">#include "<a class="code" href="../../dd/d87/animation_8h.html">animation.h</a>"</span>
00009 <span class="preprocessor">#include &lt;iostream&gt;</span>
00010 
<a name="l00011"></a><a class="code" href="../../da/d99/classCAnimation.html#a0">00011</a> <a class="code" href="../../da/d99/classCAnimation.html#a0">CAnimation::CAnimation</a>(SDL_Surface *dest) : <a class="code" href="../../d3/d44/classCSurfaceChild.html">CSurfaceChild</a>(dest)
00012 {
00013         <a class="code" href="../../da/d99/classCAnimation.html#o2">running</a> = <span class="keyword">false</span>;
00014         <a class="code" href="../../da/d99/classCAnimation.html#o6">defaultframe</a> = 0;
00015         <a class="code" href="../../da/d99/classCAnimation.html#o5">animationspeed</a> = 1;
00016         <a class="code" href="../../da/d99/classCAnimation.html#o1">delaytime</a> = 500;
00017 }
00018 
<a name="l00019"></a><a class="code" href="../../da/d99/classCAnimation.html#a1">00019</a> <a class="code" href="../../da/d99/classCAnimation.html#a1">CAnimation::~CAnimation</a>()
00020 {
00021 }
00022 
<a name="l00023"></a><a class="code" href="../../da/d99/classCAnimation.html#a2">00023</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d99/classCAnimation.html#a2">CAnimation::SetAnimationspeed</a>(<span class="keywordtype">float</span> s)
00024 {
00025         <a class="code" href="../../da/d99/classCAnimation.html#o5">animationspeed</a> = s;
00026 }
00027 
<a name="l00028"></a><a class="code" href="../../da/d99/classCAnimation.html#a3">00028</a> <span class="keywordtype">float</span> <a class="code" href="../../da/d99/classCAnimation.html#a3">CAnimation::GetAnimationspeed</a>()
00029 {
00030         <span class="keywordflow">return</span> animationspeed;
00031 }
00032 
<a name="l00033"></a><a class="code" href="../../da/d99/classCAnimation.html#a4">00033</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d99/classCAnimation.html#a4">CAnimation::SetDefaultFrame</a>(<span class="keywordtype">int</span> n)
00034 {
00035         <a class="code" href="../../da/d99/classCAnimation.html#o6">defaultframe</a> = n;
00036 }
00037 
<a name="l00038"></a><a class="code" href="../../da/d99/classCAnimation.html#a5">00038</a> <span class="keywordtype">int</span> <a class="code" href="../../da/d99/classCAnimation.html#a5">CAnimation::GetDefaultFrame</a>()
00039 {
00040         <span class="keywordflow">return</span> defaultframe;
00041 }
00042 
<a name="l00043"></a><a class="code" href="../../da/d99/classCAnimation.html#a6">00043</a> <span class="keywordtype">bool</span> <a class="code" href="../../da/d99/classCAnimation.html#a6">CAnimation::IsRunning</a>()
00044 {
00045         <span class="keywordflow">return</span> running;
00046 }
00047 
<a name="l00048"></a><a class="code" href="../../da/d99/classCAnimation.html#a7">00048</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d99/classCAnimation.html#a7">CAnimation::Start</a>()
00049 {
00050         <a class="code" href="../../da/d99/classCAnimation.html#o3">starttime</a> = SDL_GetTicks();
00051         <a class="code" href="../../da/d99/classCAnimation.html#o2">running</a> = <span class="keyword">true</span>;
00052 }
00053 
<a name="l00054"></a><a class="code" href="../../da/d99/classCAnimation.html#a8">00054</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d99/classCAnimation.html#a8">CAnimation::Stop</a>()
00055 {
00056         <a class="code" href="../../da/d99/classCAnimation.html#o2">running</a> = <span class="keyword">false</span>;
00057 }
00058 
<a name="l00059"></a><a class="code" href="../../da/d99/classCAnimation.html#a9">00059</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d99/classCAnimation.html#a9">CAnimation::SetCurrentFrame</a>()
00060 {
00061         <span class="keywordflow">if</span> (<a class="code" href="../../da/d99/classCAnimation.html#a6">IsRunning</a>())
00062         {
00063                 <a class="code" href="../../da/d99/classCAnimation.html#a10">SetPlaytime</a>();
00064                 <a class="code" href="../../da/d99/classCAnimation.html#o7">currentframe</a> = (int)(<a class="code" href="../../da/d99/classCAnimation.html#o4">playtime</a>%((int)round((<span class="keywordtype">float</span>)<a class="code" href="../../da/d99/classCAnimation.html#o1">delaytime</a>*(<span class="keywordtype">float</span>)<a class="code" href="../../da/d99/classCAnimation.html#o0">ImageList</a>.<a class="code" href="../../da/d2a/classCList.html#a2">Count</a>()*animationspeed))/delaytime);
00065         }
00066         <span class="keywordflow">else</span>
00067         {
00068                 <a class="code" href="../../da/d99/classCAnimation.html#o7">currentframe</a> = <a class="code" href="../../da/d99/classCAnimation.html#a5">GetDefaultFrame</a>();
00069         }
00070 }
00071 
<a name="l00072"></a><a class="code" href="../../da/d99/classCAnimation.html#a10">00072</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d99/classCAnimation.html#a10">CAnimation::SetPlaytime</a>()
00073 {
00074         <a class="code" href="../../da/d99/classCAnimation.html#o4">playtime</a> = SDL_GetTicks()-starttime;
00075 }
00076 
<a name="l00077"></a><a class="code" href="../../da/d99/classCAnimation.html#a11">00077</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d99/classCAnimation.html#a11">CAnimation::Draw</a>()
00078 {
00079         <a class="code" href="../../da/d99/classCAnimation.html#a9">SetCurrentFrame</a>();
00080         std::cout &lt;&lt; <span class="stringliteral">"Aktueller Frame: "</span> &lt;&lt; <a class="code" href="../../da/d99/classCAnimation.html#o7">currentframe</a> &lt;&lt; std::endl;
00081         <a class="code" href="../../da/d99/classCAnimation.html#o0">ImageList</a>[currentframe]-&gt;SetDestinationSurface(<a class="code" href="../../d3/d44/classCSurfaceChild.html#a6">GetDestinationSurface</a>());
00082         <a class="code" href="../../da/d99/classCAnimation.html#o0">ImageList</a>[currentframe]-&gt;SetPosition(<a class="code" href="../../d3/d44/classCSurfaceChild.html#a4">GetX</a>(), <a class="code" href="../../d3/d44/classCSurfaceChild.html#a5">GetY</a>());
00083         <a class="code" href="../../da/d99/classCAnimation.html#o0">ImageList</a>[currentframe]-&gt;Draw();
00084 }
</pre></div><hr size="1"><address style="align: right;"><small>Erzeugt am Wed Apr 6 20:07:26 2005 für FreeHack von&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
